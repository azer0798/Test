<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WassitDZ Game | Ù…ØªØ¬Ø± Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { 
            --primary: <%= settings.themeColor %>; 
            --dark-blue: #0f172a;
            --light-bg: #f8fafc;
            --success-green: #10b981;
        }
        
        body { background: var(--light-bg); font-family: 'Segoe UI', sans-serif; padding-top: 45px; color: #334155; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† */
        .announcement-bar { 
            background: var(--dark-blue); color: #fff; height: 45px; line-height: 45px; 
            position: fixed; top: 0; width: 100%; z-index: 2000; font-size: 0.9rem;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„Ù„ÙˆØ¬Ùˆ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ */
        .navbar { 
            background: #fff; border-bottom: 4px solid var(--primary); 
            padding: 40px 0; box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }
        .logo-wrapper {
            display: inline-block; position: relative; padding: 15px;
            background: #fff; border-radius: 20px; transition: all 0.4s ease;
        }
        .logo-wrapper img { max-height: 110px; width: auto; object-fit: contain; }
        .logo-wrapper:hover { transform: translateY(-5px); }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³Ø±ÙŠØ¹ */
        .quick-links .btn {
            border-radius: 12px; padding: 10px 20px; font-weight: 600;
            transition: 0.3s; border-width: 2px; margin: 5px;
        }
        .quick-links .btn:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }

        /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø·ÙˆØ±Ø© */
        .account-card { 
            background: #fff; border-radius: 22px; overflow: hidden; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.03); transition: all 0.3s ease;
            border: 1px solid #eef2f6; height: 100%; position: relative;
        }
        .account-card:hover { 
            transform: translateY(-10px); box-shadow: 0 15px 35px rgba(0,0,0,0.1); 
            border-color: var(--primary);
        }
        
        .img-container { height: 200px; position: relative; overflow: hidden; }
        .img-container img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .account-card:hover .img-container img { transform: scale(1.08); }

        .badge-type {
            position: absolute; top: 12px; right: 12px; z-index: 10;
            padding: 5px 12px; border-radius: 10px; font-size: 0.7rem;
            font-weight: 800; background: rgba(255,255,255,0.95); color: var(--dark-blue);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); border: 1px solid #eee;
        }

        .price-dz { font-size: 1.5rem; font-weight: 900; color: var(--success-green); }
        .btn-buy { 
            background: var(--dark-blue); color: #fff; width: 100%; 
            border-radius: 14px; padding: 12px; font-weight: 800; border: none;
            transition: 0.3s;
        }
        .btn-buy:hover { background: var(--primary); }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø«Ù‚Ø© */
        .trust-section {
            background: #fff; border-radius: 20px; padding: 20px;
            margin: 30px 0; display: flex; justify-content: space-around;
            box-shadow: 0 5px 20px rgba(0,0,0,0.02);
        }
        .trust-item { text-align: center; }
        .trust-item i { color: var(--primary); font-size: 1.4rem; display: block; margin-bottom: 5px; }
        .trust-item span { font-weight: 700; font-size: 0.85rem; }

        /* Ø§Ù„ÙÙ„ØªØ±Ø© */
        .filter-box {
            background: #fff; padding: 20px; border-radius: 20px;
            margin-bottom: 30px; border: 1px solid #f1f5f9;
        }

        /* Ø§Ù„Ø£Ø³Ø¦Ù„Ø© */
        .accordion-item { border: none !important; margin-bottom: 12px; border-radius: 15px !important; box-shadow: 0 3px 10px rgba(0,0,0,0.02); }
        .accordion-button { font-weight: 700; border-radius: 15px !important; }
        .accordion-button:not(.collapsed) { background: #fff; color: var(--primary); }
    </style>
</head>
<body>

    <div class="announcement-bar"><marquee direction="right">âš¡ <%= settings.announcement %> âš¡</marquee></div>

    <nav class="navbar text-center">
        <div class="container">
            <div class="logo-wrapper">
                <img src="<%= settings.logoUrl %>" alt="Logo">
            </div>
        </div>
    </nav>

    <div class="container mt-4 quick-links text-center">
        <a href="<%= settings.mediationLink %>" class="btn btn-outline-primary px-4">Ø§Ù„ÙˆØ³Ø§Ø·Ø©</a>
        <a href="<%= settings.sellAccountLink %>" class="btn btn-outline-success px-4">Ø¨ÙŠØ¹ Ø­Ø³Ø§Ø¨Ùƒ</a>
        <a href="<%= settings.supportLink %>" class="btn btn-outline-secondary px-4">Ø§Ù„Ø¯Ø¹Ù…</a>
    </div>

    <div class="container mt-4">
        <div class="filter-box shadow-sm">
            <div class="row g-2">
                <div class="col-8">
                    <input type="number" id="idSearch" class="form-control form-control-lg fs-6" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ #ID...">
                </div>
                <div class="col-4">
                    <select id="filterType" class="form-select form-select-lg fs-6 fw-bold">
                        <option value="all">Ø§Ù„ÙƒÙ„</option>
                        <option value="Id Konami">Id Konami</option>
                        <option value="Google Play">Google Play</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="trust-section">
            <div class="trust-item"><i class="fas fa-shield-check"></i><span>ÙˆØ³Ø§Ø·Ø© Ø¢Ù…Ù†Ø©</span></div>
            <div class="trust-item"><i class="fas fa-history"></i><span>ØªØ³Ù„ÙŠÙ… Ø³Ø±ÙŠØ¹</span></div>
            <div class="trust-item"><i class="fas fa-user-headset"></i><span>Ø¯Ø¹Ù… Ù…ØªÙˆÙØ±</span></div>
        </div>

        <div class="row g-4" id="grid">
            <% accounts.forEach(acc => { %>
            <div class="col-6 col-md-4 col-lg-3 acc-item" data-id="<%= acc.id %>" data-link="<%= acc.linkType %>">
                <div class="account-card">
                    <span class="badge-type"><%= acc.linkType %></span>
                    
                    <% if(acc.status === 'ØªÙ… Ø§Ù„Ø¨ÙŠØ¹') { %>
                        <div style="position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,0.7);z-index:15;display:flex;align-items:center;justify-content:center;">
                            <img src="https://cdn-icons-png.flaticon.com/512/4464/4464703.png" width="80" style="opacity: 0.8;">
                        </div>
                    <% } %>

                    <a href="/account/<%= acc.id %>" style="text-decoration: none; color: inherit;">
                        <div class="img-container">
                            <img src="<%= acc.imgs[0] %>" loading="lazy">
                        </div>
                        <div class="p-3 text-center">
                            <div class="d-flex justify-content-between mb-2 px-1">
                                <span class="fw-bold text-primary small">#<%= acc.id %></span>
                                <span class="text-muted small"><i class="fas fa-eye"></i> <%= acc.views %></span>
                            </div>
                            <h6 class="fw-bold text-truncate mb-3" style="color:var(--dark-blue)"><%= acc.title %></h6>
                            <div class="price-dz mb-2"><%= acc.priceDZ %> <small style="font-size: 0.8rem;">Ø¯.Ø¬</small></div>
                        </div>
                    </a>
                    <div class="px-3 pb-3">
                        <% if(acc.status === 'Ù…ØªØ§Ø­') { %>
                            <button onclick="contact('<%= acc.id %>')" class="btn-buy shadow-sm">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†</button>
                        <% } else { %>
                            <button class="btn btn-light w-100 py-2 fw-bold text-muted" disabled>Ù…Ø¨Ø§Ø¹</button>
                        <% } %>
                    </div>
                </div>
            </div>
            <% }) %>
        </div>

        <div class="my-5 pt-4">
            <h4 class="fw-bold mb-4 text-center">Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</h4>
            <div class="accordion" id="faqAcc">
                <% faqs.forEach((faq, i) => { %>
                <div class="accordion-item shadow-sm">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#f<%=i%>">
                            <%= faq.question %>
                        </button>
                    </h2>
                    <div id="f<%=i%>" class="accordion-collapse collapse" data-bs-parent="#faqAcc">
                        <div class="accordion-body text-muted"><%= faq.answer %></div>
                    </div>
                </div>
                <% }) %>
            </div>
        </div>
    </div>

    <footer class="py-4 text-center text-muted border-top mt-5 bg-white small">
        WassitDZ Game - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function filter() {
            const id = document.getElementById('idSearch').value;
            const type = document.getElementById('filterType').value;
            document.querySelectorAll('.acc-item').forEach(el => {
                const matchesId = id === "" || el.dataset.id === id;
                const matchesType = type === "all" || el.dataset.link === type;
                el.style.display = (matchesId && matchesType) ? "block" : "none";
            });
        }
        document.getElementById('idSearch').oninput = filter;
        document.getElementById('filterType').onchange = filter;

        function contact(id) {
            const link = "<%= settings.buyNowLink %>";
            const msg = encodeURIComponent("Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…ØŒ Ø£Ø±ÙŠØ¯ Ø´Ø±Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø±Ù‚Ù…: #" + id);
            if (link.includes("wa.me") || link.includes("whatsapp")) {
                window.open(link.split('?')[0] + "?text=" + msg, "_blank");
            } else if (link.includes("t.me")) {
                const user = link.split('/').pop();
                window.open("https://t.me/" + user + "?text=" + msg, "_blank");
            } else { window.open(link, "_blank"); }
        }
    </script>
</body>
</html>
